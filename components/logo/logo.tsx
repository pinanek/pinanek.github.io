import * as React from 'react'
import { animated, useSprings, useSpring } from '@react-spring/web'
import classnames from 'clsx'
import * as Styles from './logo.css'

type LogoProps = React.SVGAttributes<SVGElement>

const strokeDashArrays = [55, 75, 54, 26, 32, 41, 27, 24, 32, 58, 138, 82, 73]
const ds = [
  'M10 9.1683C12.2762 20.8337 10.8179 32.6159 11.5952 44.3718C12.0146 50.7162 12.9703 57.2902 12.9703 63.6237',
  'M11 15.9498C11.1825 8.28545 21.3335 5.39403 27.7217 6.10383C33.0106 6.69149 36.1986 13.4598 36.6326 18.04C37.4495 26.6636 30.2185 32.8576 22.7162 35.4493C20.0489 36.3707 16.8551 36.9532 14.5754 34.8717C13.6565 34.0327 11.9901 33.0908 11.9901 31.7914',
  'M30 51.417C32.9871 48.7865 35.5169 46.2797 37.8933 43.1112C38.5558 42.2279 40.0435 40.2467 41.1386 40.0034C42.2429 39.758 41.8812 53.004 41.8812 55.0749C41.8812 57.6723 41.7359 59.5714 42.9813 61.813C43.9006 63.4678 46.113 62.5339 47.2167 61.593C49.8491 59.349 50.6059 55.5863 51.2871 52.4071',
  'M55 43.5501C58.9434 41.1455 60.8645 41.1148 60.9406 46.5204C61.0131 51.6657 60.4455 56.7389 60.4455 61.8669',
  'M61 47.0585C63.3044 45.1972 72.239 38.3109 73.9813 44.5832C75.3978 49.6827 75.8515 55.1121 75.8515 60.4248',
  'M96.4256 42.1345C87.7791 40.9705 83.3517 47.5246 84.0769 55.5008C84.3557 58.5681 86.2499 61.4318 89.4949 61.8265C92.2413 62.1605 97.209 61.999 98.9008 59.4612',
  'M99.4954 44C99.4954 47.6442 97.9731 55.3347 100.266 58.3014C103.489 62.4736 107.839 56.2462 109.891 53.901',
  'M112 45.3557C115.901 39.114 117.446 46.842 117.446 50.4987C117.446 54.2299 117.446 57.9611 117.446 61.6924',
  'M118 48.4122C119.498 46.0258 121.609 42.9257 124.546 42.0865C126.963 41.3958 129.409 45.01 129.881 46.8995C131.058 51.6087 131.861 55.8937 131.861 60.7884',
  'M137 52.3636C141.503 53.5256 146.038 54.3139 149.816 51.126C151.457 49.7413 153.337 46.9432 153.337 44.6628C153.337 39.4427 148.399 40.6617 145.663 43.0402C141.671 46.5114 141.718 51.9477 143.546 56.434C144.33 58.3604 146.128 59.38 148.111 59.6793C149.193 59.8427 153.297 60.364 153.832 59.2943',
  'M159 55.5024C167.262 47.4636 174.615 39.4152 180.672 29.5398C182.109 27.1972 187.703 17.7721 184.743 15.4034C180.996 12.4058 177.432 14.6896 174.842 17.7687C169.014 24.696 168.901 34.9105 168.901 43.5662C168.901 47.5994 169.396 51.5591 169.396 55.5299C169.396 58.335 169.821 57.0258 170.414 54.9524C171.29 51.8865 172.723 46.8118 176.052 45.6014C178.023 44.8846 175.124 49.3676 174.952 50.2494C174.635 51.8699 174.59 54.2942 174.869 55.97C175.117 57.4595 182.604 62.7489 183.257 61.443',
  'M195.48 38.8854C192.829 35.2801 191.672 30.4496 195.865 27.6092C199.519 25.1335 207.144 25.1518 208.571 30.2495C209.712 34.3264 207.625 37.7508 205.133 40.8106C200.779 46.1572 196.145 51.3048 192.069 56.8722C188.82 61.3099 193.688 60.1307 197.185 59.925C201.293 59.6833 206.018 60.3238 209.836 58.6874',
  'M219.95 26.8724C223.204 24.7032 232.327 23.3705 232.327 28.9626C232.327 32.0457 230.269 33.385 227.816 35.0407C225.871 36.3535 223.254 36.7848 221.436 38.1485C220.824 38.6073 226.463 41.4792 226.854 41.6964C231.263 44.1459 235.535 46.7109 233.262 52.3949C231.896 55.8093 228.973 57.7374 225.671 59.0506C221.374 60.7598 218.86 60.9312 215 58.5556'
]

const springConfig = {
  mass: 1,
  tension: 250,
  friction: 35
}

function Logo({ className, ...props }: LogoProps): JSX.Element {
  const pathStyles = useSprings(
    strokeDashArrays.length,
    strokeDashArrays.map((strokeDashArray, index) => ({
      to: { strokeDashoffset: 0 },
      from: {
        strokeDasharray: strokeDashArray,
        strokeDashoffset: strokeDashArray
      },
      delay: index * 100,
      config: springConfig
    }))
  )

  const heartStyle = useSpring({
    to: { opacity: 1 },
    from: { opacity: 0 },
    delay: 2000,
    config: springConfig
  })

  return (
    <svg
      className={classnames(Styles.svg, className)}
      viewBox="0 0 243 71"
      xmlns="http://www.w3.org/2000/svg"
      {...props}
    >
      <animated.path
        className={Styles.heart}
        style={heartStyle}
        d="M38 31.4851C38.0417 31.5096 41.4861 33.9505 41.7404 33.8779C42.7814 33.5804 43.3544 30.8792 43.9406 30"
      />
      {ds.map((d, index) => (
        <animated.path key={d} d={d} style={pathStyles[index]} />
      ))}
    </svg>
  )
}

export default Logo
