---
import CheckIcon from '@/components/icons/check-icon.astro'
import DismissIcon from '@/components/icons/dismiss-icon.astro'
import ErrorIcon from '@/components/icons/error-icon.astro'
import InfoIcon from '@/components/icons/info-icon.astro'

export interface Props {
  variant: 'info' | 'success' | 'error' | 'warning'
}

const { variant } = Astro.props as Props

const { Icon, className } = (() => {
  switch (variant) {
    case 'success':
      return { Icon: CheckIcon, className: 'success' }
    case 'warning':
      return { Icon: ErrorIcon, className: 'warning' }
    case 'error':
      return { Icon: DismissIcon, className: 'error' }
    case 'info':
    default:
      return { Icon: InfoIcon, className: 'info' }
  }
})()
---

<aside class:list={['main', className]}>
  <Icon />
  <slot></slot>
</aside>

<style lang='scss'>
  .main {
    display: grid;
    grid-template-columns: auto 1fr;
    align-items: center;
    gap: 1rem;
    padding: 0.25rem 1rem;
    border-radius: var(--radii-md);
    background-color: var(--background-color);
    transition-property: background-color;
    transition-duration: var(--duration-default);
    transition-timing-function: var(--ease-in-out);

    & > svg :global(path) {
      fill: var(--fill-color);
    }
  }

  .info {
    --background-color: var(--color-info-bar-info-background);
    --fill-color: var(--color-accent-default);
  }

  .success {
    --background-color: var(--color-info-bar-success-background);
    --fill-color: var(--color-success-default);
  }

  .warning {
    --background-color: var(--color-info-bar-warning-background);
    --fill-color: var(--color-warning-default);
  }

  .error {
    --background-color: var(--color-info-bar-error-background);
    --fill-color: var(--color-critical-default);
  }
</style>
