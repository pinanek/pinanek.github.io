---
import { getDateString } from '@/utils/date'
import { Picture } from 'astro-imagetools/components'
import type { PostFrontMatter } from '@/types/post'
import CategoryItem from './category-item.astro'

export type Props = PostFrontMatter

const { title, description, publishedDate, lastUpdated, image, categories } = Astro.props as Props
---

<div class='container'>
  <h1>{title}</h1>
  <p>{description}</p>
  <div class='categories'>
    {categories.map((category) => <CategoryItem category={category} />)}
  </div>
  {publishedDate && (
    <div class="date">
      <span>{getDateString(publishedDate)}</span>
      {lastUpdated && (
        <>
          <span>-</span>
          <span>Last updated: {getDateString(lastUpdated)}</span>
        </>
      )}
    </div>
  )}

  <Picture src={image.url} alt={image.alt} loading='eager' placeholder='blurred' />
</div>

<style>
  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    text-align: center;
    transition-property: color;
    transition-duration: var(--duration-default);
    transition-timing-function: var(--ease-in-out);
  }

  .container h1 {
    line-height: calc(1em + 0.6rem);
  }

  .categories {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .date {
    display: flex;
    align-items: center;
    gap: 0.375rem;

    @include responsive(md) {
      gap: 0.75rem;
    }
  }

  .container :global(img) {
    border-radius: var(--radii-md);
  }

  .container :global(picture::after) {
    border-radius: var(--radii-md);
  }
</style>
